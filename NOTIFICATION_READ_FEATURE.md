# ูุธุงู ุชุชุจุน ูุฑุงุกุฉ ุงูุฅุดุนุงุฑุงุช ุงูุนุงูุฉ

## ๐ ููุฎุต ุงูุชุบููุฑุงุช

ุชู ุชุทุจูู ูุธุงู ุฌุฏูุฏ ูุชุชุจุน ูุฑุงุกุฉ ุงูุฅุดุนุงุฑุงุช ุงูุนุงูุฉ (General Notifications) ุจุญูุซ ูููู ููู ูุณุชุฎุฏู ุชุนููู ุงูุฅุดุนุงุฑุงุช ุงูุนุงูุฉ ูููุฑูุกุฉ ุจุดูู ูููุตู.

## ๐ง ุงูุชุนุฏููุงุช ุงููููุฐุฉ

### 1. ุฅุถุงูุฉ ุฌุฏูู ุฌุฏูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **ุฌุฏูู `NotificationRead`**: ูุชุชุจุน ูุฑุงุกุฉ ุงููุณุชุฎุฏููู ููุฅุดุนุงุฑุงุช ุงูุนุงูุฉ
- ูุญุชูู ุนูู:
  - `notificationId`: ูุนุฑู ุงูุฅุดุนุงุฑ
  - `userId`: ูุนุฑู ุงููุณุชุฎุฏู
  - `readAt`: ุชุงุฑูุฎ ูููุช ุงููุฑุงุกุฉ
  - ุนูุงูุงุช ูุน ุฌุฏูู `notifications` ู `User`

### 2. ุชุนุฏูู APIs

#### `pages/api/notifications/[id].ts`
- ุงูุขู ูุฏุนู ุชุญุฏูุซ ุญุงูุฉ ุงููุฑุงุกุฉ ููุฅุดุนุงุฑุงุช ุงูุนุงูุฉ
- ุนูุฏ ุชุนููู ุฅุดุนุงุฑ ุนุงู ูููุฑูุกุ ูุชู ุฅูุดุงุก ุณุฌู ูู ุฌุฏูู `NotificationRead`
- ุงูุฅุดุนุงุฑุงุช ุงูุฎุงุตุฉ ุชุนูู ููุง ูุงูุช ูู ูุจู

#### `pages/api/notifications.ts`
- ุฌูุจ ุงูุฅุดุนุงุฑุงุช ุงูุขู ูุชุถูู ุญุงูุฉ ุงููุฑุงุกุฉ ูู ุฌุฏูู `NotificationRead` ููุฅุดุนุงุฑุงุช ุงูุนุงูุฉ
- ุงูุนุฏุงุฏุงุช (counts) ุชุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุญุงูุฉ ุงููุฑุงุกุฉ ุงููุนููุฉ
- ุงูููุชุฑุฉ (unread/read) ุชุนูู ุจุดูู ุตุญูุญ ููุฅุดุนุงุฑุงุช ุงูุนุงูุฉ

## ๐ ุงูุฎุทูุงุช ุงููุทููุจุฉ ูุชุทุจูู ุงูุชุบููุฑุงุช

### 1. ุฅูุดุงุก Migration ููุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
npx prisma migrate dev --name add_notification_read_tracking
```

ูุฐุง ุงูุฃูุฑ ุณูููู ุจู:
- ุฅูุดุงุก ุฌุฏูู `NotificationRead` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฅุถุงูุฉ ุงูุนูุงูุงุช ุงููุงุฒูุฉ
- ุฅูุดุงุก ุงูููุงุฑุณ (indexes)

### 2. ุชุญุฏูุซ Prisma Client

```bash
npx prisma generate
```

ูุฐุง ุงูุฃูุฑ ุณูููู ุจุชุญุฏูุซ ุงูู TypeScript types ูุชุดูู ุงูุฌุฏูู ุงูุฌุฏูุฏ.

### 3. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู

```bash
npm run dev
# ุฃู
yarn dev
```

## ๐ ููู ูุนูู ุงููุธุงู ุงูุขู

### ุงูุฅุดุนุงุฑุงุช ุงูุฎุงุตุฉ (Personal Notifications)
- ุชุนูู ููุง ูุงูุช ูู ูุจู
- ุงูุญูู `isRead` ูู ุฌุฏูู `notifications` ูุญุฏุฏ ุญุงูุฉ ุงููุฑุงุกุฉ
- ูู ูุณุชุฎุฏู ูู ุฅุดุนุงุฑุงุชู ุงูุฎุงุตุฉ ููุท

### ุงูุฅุดุนุงุฑุงุช ุงูุนุงูุฉ (General Notifications)
- ุนูุฏูุง ูููู ูุณุชุฎุฏู ุจูุชุญ ุฅุดุนุงุฑ ุนุงูุ ูุชู ุฅูุดุงุก ุณุฌู ูู `NotificationRead`
- ูู ูุณุชุฎุฏู ูู ุณุฌู ูููุตู ุนู ูุฑุงุกุฉ ุงูุฅุดุนุงุฑุงุช ุงูุนุงูุฉ
- ุงูุฅุดุนุงุฑ ุงูุนุงู ูุธูุฑ ูููุฑูุก ูููุณุชุฎุฏู ุงูุฐู ูุฑุฃู ููุท
- ุงููุณุชุฎุฏููู ุงูุขุฎุฑูู ูุง ูุฒุงููู ูุฑูู ููุณ ุงูุฅุดุนุงุฑ ูุบูุฑ ููุฑูุก

## ๐ฏ ุงููููุฒุงุช

โ ูู ูุณุชุฎุฏู ูู ุชุชุจุน ูููุตู ููุฑุงุกุฉ ุงูุฅุดุนุงุฑุงุช ุงูุนุงูุฉ
โ ุงูุฅุดุนุงุฑุงุช ุงูุฎุงุตุฉ ุชุนูู ููุง ูุงูุช ุจุฏูู ุชุบููุฑ
โ ุงูุนุฏุงุฏุงุช ูุงูููุชุฑุฉ ุชุนูู ุจุดูู ุตุญูุญ
โ ูุง ุญุงุฌุฉ ูุชุนุฏููุงุช ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (ุชุนูู ุชููุงุฆูุงู)

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ูุซุงู: ุฅุดุนุงุฑ ุนุงู ุนู ุชุฃุฎูุฑ ูุฑุญูุฉ
1. ูุชู ุฅูุดุงุก ุงูุฅุดุนุงุฑ ูุน `userId = null`
2. ุงููุณุชุฎุฏู "ุฃุญูุฏ" ููุชุญ ุงูุฅุดุนุงุฑ โ ูุชู ุฅูุดุงุก ุณุฌู ูู `NotificationRead`
3. ุงูุฅุดุนุงุฑ ูุธูุฑ ูููุฑูุก ูููุณุชุฎุฏู "ุฃุญูุฏ" ููุท
4. ุงููุณุชุฎุฏู "ูุญูุฏ" ูุง ูุฒุงู ูุฑู ููุณ ุงูุฅุดุนุงุฑ ูุบูุฑ ููุฑูุก
5. ุนูุฏูุง ููุชุญ ุงููุณุชุฎุฏู "ูุญูุฏ" ุงูุฅุดุนุงุฑุ ูุชู ุฅูุดุงุก ุณุฌู ูููุตู ูู

## โ๏ธ ููุงุญุธุงุช ูููุฉ

- ูุฌุจ ุชุดุบูู `prisma migrate` ูุจู ุงุณุชุฎุฏุงู ุงููุธุงู
- ูุฌุจ ุชุดุบูู `prisma generate` ูุชุญุฏูุซ ุงูู types
- ุงูุฌุฏูู ุงูุฌุฏูุฏ ูุญุชูู ุนูู `unique constraint` ูููุน ุงูุชูุฑุงุฑ
- ุนูุฏ ุญุฐู ุฅุดุนุงุฑุ ูุชู ุญุฐู ุณุฌูุงุช ุงููุฑุงุกุฉ ุชููุงุฆูุงู (CASCADE)

