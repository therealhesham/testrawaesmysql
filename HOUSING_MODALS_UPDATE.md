# تحديث مودالات التسكين

## التعديلات المطبقة

### 1. **تقسيم المودال إلى مودالين منفصلين**:

#### **مودال اختيار النوع** (`workerTypeSelection`)
- مودال بسيط لاختيار نوع العاملة (داخلية/خارجية)
- تصميم مركزي مع أزرار تفاعلية
- انتقال تلقائي للمودال التالي عند الاختيار

#### **مودال تسكين العاملة** (`housingForm`)
- مودال كامل مع جميع الحقول المطلوبة
- بحث ذكي عن العاملات مع الاقتراحات
- عرض معلومات العاملة المختارة

### 2. **نظام البحث الذكي**:

#### **ميزات البحث**:
- البحث بالرقم أو الاسم
- اقتراحات فورية أثناء الكتابة
- قائمة منسدلة مع النتائج
- اختيار سهل من القائمة

#### **API المستخدم**:
```typescript
// البحث عن العاملات
const searchWorkers = async (searchTerm: string) => {
  const response = await axios.get('/api/suggest-homemaids', {
    params: { search: searchTerm }
  });
  setWorkerSuggestions(response.data.data || []);
};
```

### 3. **تحسينات التصميم**:

#### **مودال اختيار النوع**:
- حجم متوسط (`max-w-md`)
- تصميم بسيط ومركز
- أزرار تفاعلية مع hover effects

#### **مودال التسكين**:
- حجم كبير (`max-w-4xl`)
- تنظيم الحقول في صفوف
- أيقونات SVG للحقول
- قائمة اقتراحات منسدلة

### 4. **إدارة الحالة**:

#### **States الجديدة**:
```typescript
const [workerType, setWorkerType] = useState<'داخلية' | 'خارجية'>('داخلية');
const [workerSearchTerm, setWorkerSearchTerm] = useState('');
const [workerSuggestions, setWorkerSuggestions] = useState<any[]>([]);
const [selectedWorker, setSelectedWorker] = useState<any>(null);
```

#### **Modals الجديدة**:
```typescript
workerTypeSelection: false,  // مودال اختيار النوع
housingForm: false,          // مودال تسكين العاملة
```

### 5. **تدفق العمل**:

#### **الخطوات**:
1. **النقر على "تسكين عاملة"** → فتح مودال اختيار النوع
2. **اختيار النوع** → إغلاق المودال الأول وفتح مودال التسكين
3. **البحث عن العاملة** → كتابة الرقم/الاسم والحصول على الاقتراحات
4. **اختيار العاملة** → ملء الحقول تلقائياً
5. **إكمال البيانات** → حفظ التسكين

### 6. **ميزات إضافية**:

#### **البحث الذكي**:
- بحث فوري أثناء الكتابة
- عرض اسم العاملة ورقمها
- إغلاق القائمة عند الاختيار

#### **التحقق من البيانات**:
- حقول مقفلة للمعلومات المختارة
- عرض نوع العاملة في العنوان
- تحقق من صحة البيانات قبل الحفظ

### 7. **التوافق مع النظام المالي**:

#### **نفس آلية البحث**:
- استخدام نفس API (`/api/suggest-homemaids`)
- نفس تنسيق النتائج
- نفس تجربة المستخدم

#### **تحسينات إضافية**:
- تحسين سرعة البحث
- تحسين عرض النتائج
- تحسين تجربة المستخدم

## كيفية الاستخدام

### **للمستخدم**:
1. النقر على "تسكين عاملة"
2. اختيار نوع العاملة (داخلية/خارجية)
3. البحث عن العاملة بالرقم أو الاسم
4. اختيار العاملة من القائمة
5. إكمال باقي البيانات
6. حفظ التسكين

### **للمطور**:
- إضافة مودالات جديدة في `modals` state
- إضافة functions للبحث والاختيار
- تحسين API للبحث السريع
- إضافة validation للبيانات

## التحسينات المستقبلية

1. **إضافة فلترة متقدمة** للبحث
2. **تحسين سرعة البحث** مع debouncing
3. **إضافة validation** للبيانات المطلوبة
4. **تحسين UX** مع loading states
5. **إضافة keyboard navigation** للقوائم
