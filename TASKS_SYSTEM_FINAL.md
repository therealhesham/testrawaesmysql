# ูุธุงู ุงูููุงู ุงููุญุณู - ุงูุฅุตุฏุงุฑ ุงูููุงุฆู

## โ ุงูุชุญุฏูุซุงุช ุงูููุฌุฒุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช
ุชู ุชุญุฏูุซ ูููุฐุฌ `tasks` ูู `schema.prisma` ูุฏุนู:

- **ุฏุฑุฌุฉ ุงูุฃูููุฉ** (`priority`): ุนุงููุฉุ ูุชูุณุทุฉุ ููุฎูุถุฉ
- **ุงูุชูุนูู** (`isActive`): ุชูุนูู/ุฅูุบุงุก ุชูุนูู ุงูููุงู
- **ุงูุชูุฑุงุฑ** (`isRepeating`): ููุงู ูุชูุฑุฑุฉ
- **ููุน ุงูุชูุฑุงุฑ** (`repeatType`): ููููุ ุฃุณุจูุนูุ ุดูุฑูุ ุณููู
- **ูุงุตู ุงูุชูุฑุงุฑ** (`repeatInterval`): ูู X ุฃูุงู/ุฃุณุงุจูุน/ุฃุดูุฑ/ุณููุงุช
- **ุชูุงุฑูุฎ ุงูุชูุฑุงุฑ** (`repeatStartDate`, `repeatEndDate`)
- **ููุน ุงูุชูุงุก ุงูุชูุฑุงุฑ** (`repeatEndType`): never, date, count
- **ุนุฏุฏ ูุฑุงุช ุงูุชูุฑุงุฑ** (`repeatCount`)
- **ุฃูุงู ุงูุฃุณุจูุน** (`repeatDays`): ููุชูุฑุงุฑ ุงูุฃุณุจูุนู (JSON)
- **ููุช ุงูุชูููุฐ** (`repeatTime`): ููุช ูุญุฏุฏ ูููููุฉ
- **ุชุงุฑูุฎ ุงูุฅูุฌุงุฒ** (`completionDate`)
- **ููุงุญุธุงุช ุงูุฅูุฌุงุฒ** (`completionNotes`)
- **ุงููููุฉ ุงูุฃุตููุฉ** (`parentTaskId`): ูุฑุจุท ุงูููุงู ุงููุชูุฑุฑุฉ

### 2. API Endpoints ุงููุญุฏุซุฉ

#### `/api/tasks/[userId].ts`
- **GET**: ุงุณุชุฑุฌุงุน ุงูููุงู ูุน ุฌููุน ุงูุญููู ุงูุฌุฏูุฏุฉ
- **POST**: ุฅูุดุงุก ูููุฉ ุฌุฏูุฏุฉ ูุน ุฏุนู:
  - ุงูุฃููููุฉ
  - ุงูุชูุฑุงุฑ
  - ุงูุชูุนูู
  - ุฌููุน ุฅุนุฏุงุฏุงุช ุงูุชูุฑุงุฑ

#### `/api/tasks/add-with-random-search.ts`
- ุชู ุชุญุฏูุซู ุจุงููุงูู ูุฏุนู ุฌููุน ุงูุญููู ุงูุฌุฏูุฏุฉ
- ูุนุงูุฌุฉ ุตุญูุญุฉ ูู JSON ูู ุญูู `repeatDays`
- ุฏุนู ุชุญููู ุงูุชูุงุฑูุฎ ุจุดูู ุตุญูุญ
- ุฅุถุงูุฉ TypeScript types ููุฃูุงู

### 3. ููุฏุงู ุฅุถุงูุฉ ุงูููุงู

#### `components/AddTaskModal.tsx`
ูุญุชูู ุนูู ุฌููุน ุงูุญููู:
- โ ุงูุนููุงู
- โ ุงููุตู (ูุญุฑุฑ ูุตูุต ุบูู)
- โ ุงููุณุคูู (ุงุฎุชูุงุฑ ูู ูุงุฆูุฉ ุงููุณุชุฎุฏููู)
- โ ุงูููุนุฏ ุงูููุงุฆู
- โ ุฏุฑุฌุฉ ุงูุฃูููุฉ (ูุงุฆูุฉ ููุณุฏูุฉ ูุฎุตุตุฉ)
- โ ุชูุนูู ุงููููุฉ (checkbox)
- โ ุชูุฑุงุฑ ุงููููุฉ (checkbox)
- โ ุฅุนุฏุงุฏุงุช ุงูุชูุฑุงุฑ:
  - ููุน ุงูุชูุฑุงุฑ (ููููุ ุฃุณุจูุนูุ ุดูุฑูุ ุณููู)
  - ูุงุตู ุงูุชูุฑุงุฑ
  - ุฃูุงู ุงูุฃุณุจูุน (ููุชูุฑุงุฑ ุงูุฃุณุจูุนู)
  - ุจุฏุงูุฉ ุงูุชูุฑุงุฑ
  - ููุงูุฉ ุงูุชูุฑุงุฑ (ุจุนุฏ ุนุฏุฏ ูุญุฏุฏุ ุชุงุฑูุฎ ูุญุฏุฏุ ุฃู ุจุฏูู ููุงูุฉ)
  - ููุช ุงูุชูููุฐ

### 4. ุนุฑุถ ุงูููุงู ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ

#### `pages/admin/home.tsx`
ุชู ุชุญุณูู ุนุฑุถ ุงูููุงู:
- **ุนุฑุถ ุฏุฑุฌุฉ ุงูุฃูููุฉ**: ูุน ุฃููุงู ูููุฒุฉ
  - ุนุงููุฉ ุงูุฃูููุฉ: ุฃุญูุฑ
  - ูุชูุณุท ุงูุฃูููุฉ: ุฃุตูุฑ
  - ููุฎูุถ ุงูุฃูููุฉ: ุฃุฎุถุฑ
- **ูุคุดุฑ ุงูุชูุฑุงุฑ**: badge "ูุชูุฑุฑุฉ" ููููุงู ุงููุชูุฑุฑุฉ
- **ุนุฑุถ ููุช ุงูุชูููุฐ**: ุฅุฐุง ูุงู ูุญุฏุฏ
- **ุชุญุณูู ุงูุชุฎุทูุท**: ุนุฑุถ ุฃูุถู ูุฃูุซุฑ ูุถูุญุงู

### 5. ุงูุชูุงูู ุงููุงูู

#### ูู ุงูููุฏุงู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
1. **ุงูููุฏุงู** ูุฌูุน ุฌููุน ุงูุจูุงูุงุช ูู ุงููุณุชุฎุฏู
2. **handleAddTask** ูู home.tsx ูุฑุณู ุงูุจูุงูุงุช ููู API
3. **API endpoint** ูุณุชูุจู ุงูุจูุงูุงุช ููุนุงูุฌูุง
4. **Prisma** ูุญูุธ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
5. **ุงูุงุณุชุฑุฌุงุน** ูุนุฑุถ ุงูููุงู ูุน ุฌููุน ุงูุชูุงุตูู

## ๐จ ุงูููุฒุงุช ุงูุจุตุฑูุฉ

### ุฃููุงู ุงูุฃููููุฉ:
- **ุนุงููุฉ ุงูุฃูููุฉ**: `bg-red-100 text-red-600`
- **ูุชูุณุท ุงูุฃูููุฉ**: `bg-yellow-100 text-yellow-600`
- **ููุฎูุถ ุงูุฃูููุฉ**: `bg-green-100 text-green-600`

### ูุคุดุฑุงุช ุงูุชูุฑุงุฑ:
- **ูุชูุฑุฑุฉ**: `bg-blue-100 text-blue-600`

## ๐ง ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุฅุถุงูุฉ ูููุฉ ุฌุฏูุฏุฉ:
1. ุงุถุบุท ุนูู "ุฅุถุงูุฉ ูููุฉ" ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
2. ุงููุฃ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ:
   - ุงูุนููุงู
   - ุงููุตู (ุงุณุชุฎุฏู ูุญุฑุฑ ุงููุตูุต ุงูุบูู)
   - ุงุฎุชุฑ ุงููุณุคูู
   - ุญุฏุฏ ุงูููุนุฏ ุงูููุงุฆู
3. ุงุฎุชุฑ ุฏุฑุฌุฉ ุงูุฃูููุฉ
4. ูุนูู/ุฃูุบ ุชูุนูู ุงููููุฉ
5. ุฅุฐุง ุฃุฑุฏุช ูููุฉ ูุชูุฑุฑุฉ:
   - ูุนูู "ุชูุฑุงุฑ ุงููููุฉ"
   - ุงุฎุชุฑ ููุน ุงูุชูุฑุงุฑ
   - ุญุฏุฏ ุงููุงุตู ุงูุฒููู
   - ููุฃุณุจูุนู: ุงุฎุชุฑ ุงูุฃูุงู
   - ุญุฏุฏ ุงูุจุฏุงูุฉ ูุงูููุงูุฉ
   - ุญุฏุฏ ุงูููุช
6. ุงุญูุธ ุงููููุฉ

### ุนุฑุถ ุงูููุงู:
- **ููุงูู**: ุงูููุงู ุงููุณูุฏุฉ ูู
- **ููุงู ูุฑุณูุฉ**: ุงูููุงู ุงูุชู ุฃุฑุณูุชูุง ููุขุฎุฑูู
- **ุงููุคุดุฑุงุช ุงูุจุตุฑูุฉ**: ุฃููุงู ููุฃููููุฉ ููุคุดุฑ ููุชูุฑุงุฑ
- **ุงูุชูุงุตูู**: ุงูููุนุฏุ ุงูููุชุ ุงููุณุคูู

## ๐ ุงูุจูุงูุงุช ุงููุฑุณูุฉ ูู ุงูููุฏุงู

```javascript
{
  title: "ุนููุงู ุงููููุฉ",
  description: "ูุตู ุงููููุฉ",
  assignee: "ูุนุฑู ุงููุณุคูู",
  deadline: "2025-01-01",
  priority: "ุนุงููุฉ ุงูุฃูููุฉ",
  isActive: true,
  isRepeating: true,
  repeatType: "weekly",
  repeatInterval: 1,
  repeatStartDate: "2025-01-01",
  repeatEndDate: "2025-12-31",
  repeatEndType: "date",
  repeatCount: 10,
  repeatDays: ["ุงูุฃุญุฏ", "ุงูุซูุงุซุงุก"],
  repeatTime: "09:00"
}
```

## ๐ ูุนุงูุฌุฉ API

### ูู `/api/tasks/add-with-random-search.ts`:

```javascript
// ุงุณุชูุจุงู ุฌููุน ุงูุจูุงูุงุช
const { 
  userId, title, description, taskDeadline, assignee,
  priority, isActive, isRepeating, repeatType, 
  repeatInterval, repeatStartDate, repeatEndDate,
  repeatEndType, repeatCount, repeatDays, repeatTime
} = req.body;

// ูุนุงูุฌุฉ ุงูุจูุงูุงุช
const taskData = {
  userId: selectedUserId,
  assignedBy: parseInt(userId),
  description,
  Title: title,
  taskDeadline: new Date(taskDeadline).toISOString(),
  isCompleted: false,
  priority: priority || null,
  isActive: isActive !== undefined ? isActive : true,
  isRepeating: isRepeating || false,
};

// ุฅุถุงูุฉ ุญููู ุงูุชูุฑุงุฑ ุฅุฐุง ูุงูุช ุงููููุฉ ูุชูุฑุฑุฉ
if (isRepeating) {
  taskData.repeatType = repeatType || null;
  taskData.repeatInterval = repeatInterval || 1;
  taskData.repeatStartDate = repeatStartDate ? new Date(repeatStartDate).toISOString() : null;
  taskData.repeatEndDate = repeatEndDate ? new Date(repeatEndDate).toISOString() : null;
  taskData.repeatEndType = repeatEndType || 'never';
  taskData.repeatCount = repeatCount || 1;
  taskData.repeatDays = repeatDays ? JSON.stringify(repeatDays) : null;
  taskData.repeatTime = repeatTime || null;
}

// ุงูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
const task = await prisma.tasks.create({ data: taskData });
```

## โจ ุงููุฒุงูุง

### ูููุณุชุฎุฏููู:
- **ูุงุฌูุฉ ุณููุฉ**: ููุฏุงู ูุชูุฏู ูุน ุฌููุน ุงูุฎูุงุฑุงุช
- **ุชูุธูู ุฃูุถู**: ุชุตููู ุญุณุจ ุงูุฃููููุฉ
- **ููุงู ูุชูุฑุฑุฉ**: ูุง ุญุงุฌุฉ ูุฅุนุงุฏุฉ ุฅุฏุฎุงู ุงูููุงู ุงูุฏูุฑูุฉ
- **ูุฑููุฉ**: ุฎูุงุฑุงุช ูุชูุฏูุฉ ููุชูุฑุงุฑ
- **ูุถูุญ ุจุตุฑู**: ุฃููุงู ููุคุดุฑุงุช ูุงุถุญุฉ

### ูููุฏูุฑูู:
- **ุชุชุจุน ุดุงูู**: ูุนุฑูุฉ ูู ุฃุฑุณู ูุฅูู ูู
- **ุฅุฏุงุฑุฉ ูุชูุฏูุฉ**: ุชูุนูู/ุฅูุบุงุก ุชูุนูู
- **ูุนูููุงุช ูุงููุฉ**: ุฌููุน ุงูุชูุงุตูู ูู ููุงู ูุงุญุฏ

## ๐ ุงูุญุงูุฉ ุงูููุงุฆูุฉ

- โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุญุฏุซุฉ ูุชุนูู
- โ API endpoints ุชุณุชูุจู ูุชุญูุธ ุฌููุน ุงูุจูุงูุงุช
- โ ุงูููุฏุงู ูุฑุณู ุฌููุน ุงูุญููู ุจุดูู ุตุญูุญ
- โ ุงูุนุฑุถ ูุธูุฑ ุฌููุน ุงูุชูุงุตูู
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู ุงูููุฏ
- โ ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู

## ๐ ููุงุญุธุงุช ูููุฉ

1. **repeatDays** ูุชู ุญูุธู ูู JSON string ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. **ุงูุชูุงุฑูุฎ** ูุชู ุชุญููููุง ูู ISO string ูุจู ุงูุญูุธ
3. **ุงูุญููู ุงูุงุฎุชูุงุฑูุฉ** ุชุญูุธ ูู null ุฅุฐุง ูู ุชูู ููุฌูุฏุฉ
4. **isActive** ุงูุชุฑุงุถู true ุฅุฐุง ูู ูุชู ุชุญุฏูุฏู
5. **repeatEndType** ุงูุชุฑุงุถู 'never' ููููุงู ุงููุชูุฑุฑุฉ

ุงููุธุงู ุงูุขู ุฌุงูุฒ ุชูุงูุงู ููุงุณุชุฎุฏุงู! ๐
